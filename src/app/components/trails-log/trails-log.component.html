<div class="header">
  <h2 class="hikingLogTitle">
      Hiking Log
  </h2>
  <button mat-mini-fab><mat-icon (click)="openForm()">add</mat-icon></button>
</div>
<div *ngIf="addUser" class="hidden-form">
  <form [formGroup]="trailForm" (ngSubmit)="saveTrail(trailForm)" class="form">
    <div class="hike-form">
      <mat-form-field appearance="fill" color="primary" class="name-form-field">
        <mat-label>Trail or Section Name</mat-label>
        <input formControlName="trailName" required matInput [matAutocomplete]="auto">
        <mat-autocomplete #auto="matAutocomplete">
          <mat-option *ngFor="let trail of trails" [value]="trail.name">
            {{trail.name}}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>
      <mat-form-field appearance="fill" color="primary" class="miles-form-field">
        <mat-label>Total Miles Hiked</mat-label>
        <input formControlName="totalMiles" required matInput [value]="trailObjSelectedMiles">
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Sections</mat-label>
        <mat-select formControlName="sections" multiple>
          <mat-option *ngFor="let section of sectionNameArray" [value]="section">{{section.sectionName}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="date-comments-form">
      <mat-form-field appearance="fill" color="primary" class="date-form-field">
        <mat-label>Hike Date</mat-label>
        <input matInput [matDatepicker]="hikeDate" formControlName="date" (click)="$event.stopPropagation();">
        <mat-datepicker-toggle matSuffix [for]="hikeDate"></mat-datepicker-toggle>
        <mat-datepicker #hikeDate></mat-datepicker>
      </mat-form-field>

      <mat-form-field appearance="fill" color="primary" class="comments-form-field">
        <mat-label>Comments</mat-label>
        <input formControlName="comments" matInput>
      </mat-form-field>
      <button mat-icon-button mat-mini-fab matTooltip="Save" type="submit"
        class="submit_btn">
        <mat-icon class="save_icon">save</mat-icon>
      </button>
    </div>
  </form>
</div>

<div class="log_container">
  <mat-card *ngFor="let userHike of userHikes" class="mat-elevation-z2 hike-card">
    <mat-card-title>
      {{ userHike.trailName }}</mat-card-title>
    <mat-card-subtitle>{{ userHike.date | date: 'MM/dd/yyyy' }}</mat-card-subtitle>
    <mat-card-content>{{ userHike.comments }}</mat-card-content>
    <mat-card-content>{{ userHike.totalMiles }} miles hiked</mat-card-content>
    <h4>Sections hiked:</h4>
    <ul *ngFor="let section of userHike.sections">
      <li>
        {{ section.sectionName }} -- {{ section.sectionLength }} miles
      </li>
    </ul>
  </mat-card>
</div>